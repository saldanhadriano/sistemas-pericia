# Bot√£o "Hoje"
    with col_hoje:
        # Manter o alinhamento com espa√ßo em branco
        st.markdown("<br>", unsafe_allow_html=True) 
        
        # AJUSTE DA FUN√á√ÉO: Remove a tentativa de modificar as chaves dos widgets.
        def reset_to_today():
            """Fun√ß√£o de callback para resetar o estado para o m√™s/ano atual."""
            # S√≥ atualizamos as chaves de controle do calend√°rio
            st.session_state.cal_mes = datetime.now().month
            st.session_state.cal_ano = datetime.now().year
            # N√£o √© necess√°rio modificar 'select_mes' ou 'select_ano'.
            # O st.rerun() far√° com que o c√≥digo execute novamente, e os selectboxes
            # ler√£o os novos valores de 'cal_mes' e 'cal_ano' atrav√©s do par√¢metro 'index'.

        # Uso do callback para garantir que o estado seja redefinido.
        if st.button("üìÖ Hoje", use_container_width=True, type="primary", key="btn_hoje", on_click=reset_to_today):
            # O on_click executa a fun√ß√£o *antes* de finalizar o bot√£o e chamar o rerun.
            # O st.rerun() dentro do if √© a forma mais simples de for√ßar a recarga.
            st.rerun()